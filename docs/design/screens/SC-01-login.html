<!DOCTYPE html>
<html lang="ko"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Login - VOC Auto Bot</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;family=Noto+Sans+KR:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#556780",
              "primary-light": "#8a9db3",
              "primary-dark": "#2d3745",
              "background-light": "#f5f5f4",
              "background-dark": "#1c1917",
              "surface-light": "#ffffff",
              "surface-dark": "#2d3745",
              "border-light": "#e7e5e4",
              "border-dark": "#373330",
              "success": "#6b8e6b",
              "warning": "#b38f4d",
              "danger": "#a16060",
              "info": "#5b8a8a",
            },
            fontFamily: {
              display: ["Inter", "Noto Sans KR", "sans-serif"],
              body: ["Inter", "Noto Sans KR", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.375rem",
            },
          },
        },
      };
    </script>
<style>
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }
        .required::after {
            content: '*';
            color: #a16060;
            margin-left: 4px;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 min-h-screen flex items-center justify-center">
<div class="w-full max-w-md px-4">
<div class="text-center mb-8">
<div class="flex items-center justify-center gap-2 mb-4">
<span class="material-icons-outlined text-primary text-4xl">smart_toy</span>
<span class="font-bold text-2xl tracking-tight">VOC Auto Bot</span>
</div>
<p class="text-slate-500 dark:text-slate-400 text-sm">고객의 목소리를 빠르고 정확하게 처리하는 AI 솔루션</p>
</div>
<div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg border border-border-light dark:border-border-dark overflow-hidden">
<div class="p-8">
<h1 class="text-2xl font-bold mb-6">로그인</h1>
<div id="error-alert" class="hidden mb-6 p-4 bg-danger/10 dark:bg-danger/5 border border-danger/20 rounded-lg flex gap-3" role="alert" aria-live="assertive">
<span class="material-icons-outlined text-danger flex-shrink-0">error</span>
<div class="flex-1">
<p class="text-sm text-slate-900 dark:text-slate-100" id="error-message"></p>
</div>
<button type="button" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors" onclick="document.getElementById('error-alert').classList.add('hidden')">
<span class="material-icons-outlined text-lg">close</span>
</button>
</div>
<form id="login-form" class="space-y-6">
<div>
<label class="block text-sm font-semibold mb-2 required" for="username">아이디</label>
<input
    class="w-full px-4 py-2 bg-white dark:bg-slate-800 border border-border-light dark:border-border-dark rounded focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all"
    id="username"
    name="username"
    type="text"
    placeholder="아이디 입력"
    autocomplete="username"
    maxlength="50"
    required
    aria-label="아이디"
    aria-required="true"
    aria-invalid="false"
/>
<p class="hidden text-sm text-danger mt-1" id="username-error" role="alert"></p>
</div>
<div>
<label class="block text-sm font-semibold mb-2 required" for="password">비밀번호</label>
<input
    class="w-full px-4 py-2 bg-white dark:bg-slate-800 border border-border-light dark:border-border-dark rounded focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all"
    id="password"
    name="password"
    type="password"
    placeholder="비밀번호 입력"
    autocomplete="current-password"
    maxlength="100"
    required
    aria-label="비밀번호"
    aria-required="true"
    aria-invalid="false"
/>
<p class="hidden text-sm text-danger mt-1" id="password-error" role="alert"></p>
</div>
<button
    type="submit"
    id="login-button"
    class="w-full px-6 py-3 bg-primary text-white font-semibold rounded hover:bg-primary-dark transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
    aria-label="로그인"
>
<span id="login-button-text">로그인</span>
<span id="login-spinner" class="hidden material-icons-outlined animate-spin">refresh</span>
</button>
<div class="text-center">
<a href="/forgot-password" class="text-sm text-slate-600 dark:text-slate-400 hover:text-primary dark:hover:text-primary-light transition-colors">
                            비밀번호를 잊으셨나요?
                        </a>
</div>
</form>
</div>
</div>
<div class="mt-8 text-center">
<p class="text-xs text-slate-400">VOC Auto Bot Design System v1.0 - 2026 All rights reserved.</p>
</div>
</div>
<script>
        // Form validation and submission
        const form = document.getElementById('login-form');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginButton = document.getElementById('login-button');
        const loginButtonText = document.getElementById('login-button-text');
        const loginSpinner = document.getElementById('login-spinner');
        const errorAlert = document.getElementById('error-alert');
        const errorMessage = document.getElementById('error-message');
        const usernameError = document.getElementById('username-error');
        const passwordError = document.getElementById('password-error');

        // Clear field error on input
        usernameInput.addEventListener('input', () => {
            usernameError.classList.add('hidden');
            usernameInput.setAttribute('aria-invalid', 'false');
        });

        passwordInput.addEventListener('input', () => {
            passwordError.classList.add('hidden');
            passwordInput.setAttribute('aria-invalid', 'false');
        });

        // Form submission
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Hide previous errors
            errorAlert.classList.add('hidden');
            usernameError.classList.add('hidden');
            passwordError.classList.add('hidden');

            // Client-side validation
            let hasError = false;

            if (!usernameInput.value.trim()) {
                usernameError.textContent = '아이디를 입력해주세요';
                usernameError.classList.remove('hidden');
                usernameInput.setAttribute('aria-invalid', 'true');
                hasError = true;
            }

            if (!passwordInput.value.trim()) {
                passwordError.textContent = '비밀번호를 입력해주세요';
                passwordError.classList.remove('hidden');
                passwordInput.setAttribute('aria-invalid', 'true');
                hasError = true;
            }

            if (hasError) {
                return;
            }

            // Set loading state
            loginButton.disabled = true;
            loginButtonText.textContent = '로그인 중...';
            loginSpinner.classList.remove('hidden');

            try {
                // Demo mode: directly navigate to dashboard
                window.location.href = 'SC-11-dashboard.html';
                return;

                // API call (simulated)
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: usernameInput.value,
                        password: passwordInput.value,
                    }),
                });

                const data = await response.json();

                if (response.ok && data.success) {
                    // Store tokens and user info
                    localStorage.setItem('accessToken', data.data.accessToken);
                    localStorage.setItem('refreshToken', data.data.refreshToken);
                    localStorage.setItem('user', JSON.stringify(data.data.user));

                    // Check if temporary password
                    if (data.data.user.isTemporaryPassword) {
                        window.location.href = '/change-password';
                        return;
                    }

                    // Redirect based on role
                    switch (data.data.user.role) {
                        case 'VOC_CREATOR':
                            window.location.href = 'SC-02-voc-input.html';
                            break;
                        case 'VOC_HANDLER':
                            window.location.href = 'SC-04-voc-kanban.html';
                            break;
                        case 'ADMIN':
                            window.location.href = 'SC-11-dashboard.html';
                            break;
                        default:
                            window.location.href = 'SC-11-dashboard.html';
                    }
                } else {
                    // Show error message
                    errorMessage.textContent = data.error?.message || '로그인에 실패했습니다';
                    errorAlert.classList.remove('hidden');
                }
            } catch (error) {
                // Network error
                errorMessage.textContent = '서버에 연결할 수 없습니다. 잠시 후 다시 시도해주세요';
                errorAlert.classList.remove('hidden');
            } finally {
                // Reset loading state
                loginButton.disabled = false;
                loginButtonText.textContent = '로그인';
                loginSpinner.classList.add('hidden');
            }
        });

        // Dark mode toggle (for demo purposes)
        document.addEventListener('keydown', (e) => {
            if (e.key === 'd' && e.ctrlKey) {
                e.preventDefault();
                document.documentElement.classList.toggle('dark');
            }
        });
    </script>
</body></html>
