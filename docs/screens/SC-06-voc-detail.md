# SC-06: VOC 상세 화면

## 1. 화면 개요

### 1.1 목적
VOC 처리 담당자가 VOC의 상세 정보와 AI 분석 결과를 확인하고, 카테고리 수정, 메모 작성, 상태 변경, 반려 등의 작업을 수행하는 화면입니다.

### 1.2 접근 권한
- **대상 사용자**: VOC 처리 담당자
- **권한 레벨**: VOC 처리 권한 필요
- **인증 요구**: 로그인 필수

### 1.3 화면 진입 경로
- SC-04 (칸반보드) 또는 SC-05 (테이블 리스트)에서 VOC 항목 클릭
- URL: `/voc/{vocId}`

---

## 2. 레이아웃 구조

```
┌─────────────────────────────────────────────────────────────┐
│ Header: VOC 상세                                [뒤로가기] │
├─────────────────────────────────────────────────────────────┤
│ VOC 기본 정보 섹션                                          │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ Ticket ID: VOC-20260123-00001                           │ │
│ │ 상태: [처리중]                                          │ │
│ │ 접수일시: 2026-01-23 14:30:25                           │ │
│ │ 최종 사용자 이메일: user@example.com                    │ │
│ │ 제목: 결제 오류 발생                                    │ │
│ │ 내용: [...상세 내용...]                                 │ │
│ │ 발생 시간: 2026-01-23 14:25:00 (선택)                  │ │
│ │ 계정 ID: user123 (선택)                                 │ │
│ │ 첨부파일: [파일1.png] [파일2.log] (선택)                │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ AI 분석 결과 섹션                                           │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 자동 분류 카테고리: 오류/버그 > 시스템 오류              │ │
│ │ 추천 응대 가이드: [...AI 추천 내용...]                  │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 유사 VOC 섹션                                               │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 유사 VOC (5건)                                          │ │
│ │ [VOC-20260120-00045] 유사도 0.92                        │ │
│ │ [VOC-20260118-00032] 유사도 0.85                        │ │
│ │ [VOC-20260115-00021] 유사도 0.78                        │ │
│ │ [VOC-20260112-00013] 유사도 0.75                        │ │
│ │ [VOC-20260110-00009] 유사도 0.71                        │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 로그 분석 결과 섹션 (조건부 표시)                           │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 로그 분석 결과                                          │ │
│ │ - 검색 시간 범위: 2026-01-23 14:15 ~ 14:35             │ │
│ │ - 총 검색 건수: 128건                                   │ │
│ │ - 주요 발견사항:                                        │ │
│ │   • 외부 연동 시스템 타임아웃 에러 (14:25:12)          │ │
│ │   • HTTP 500 응답 3회 발생                              │ │
│ │   • Exception: PaymentGatewayTimeout                    │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ DB 조회 결과 섹션 (조건부 표시)                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ DB 조회 결과                                            │ │
│ │ - 조회 테이블: payments, transactions                   │ │
│ │ - 주요 발견사항:                                        │ │
│ │   • 거래 ID 1234567890의 상태가 PENDING으로 확인        │ │
│ │   • 요청 금액과 실제 처리 금액 불일치                   │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 카테고리 수정 섹션                                          │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 카테고리 수정 (선택)                                    │ │
│ │ 대분류: [오류/버그 ▼]                                   │ │
│ │ 중분류: [시스템 오류 ▼]                                 │ │
│ │ [저장]                                                  │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 담당자 메모 섹션                                            │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 담당자 메모                                             │ │
│ │ ┌─────────────────────────────────────────────────────┐ │ │
│ │ │ 메모 내용 입력 (최대 1000자)                        │ │ │
│ │ └─────────────────────────────────────────────────────┘ │ │
│ │ [임시저장] [저장]                                       │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 변경 이력 섹션                                              │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 변경 이력                                               │ │
│ │ ┌─────────────────────────────────────────────────────┐ │ │
│ │ │ 2026-01-23 15:00:00 | admin@example.com              │ │ │
│ │ │ 상태 변경: 분석중 → 처리중                          │ │ │
│ │ ├─────────────────────────────────────────────────────┤ │ │
│ │ │ 2026-01-23 14:32:05 | system                         │ │ │
│ │ │ 상태 변경: 접수 → 분석중                            │ │ │
│ │ ├─────────────────────────────────────────────────────┤ │ │
│ │ │ 2026-01-23 14:30:25 | user@example.com               │ │ │
│ │ │ VOC 접수 완료                                       │ │ │
│ │ └─────────────────────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 하단 액션 버튼                                              │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [반려] [완료 처리] [이메일 발송]                        │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. UI 요소 목록

### 3.1 VOC 기본 정보 섹션

| 항목 | 타입 | 설명 | 표시 조건 |
|------|------|------|----------|
| Ticket ID | 텍스트 (읽기 전용) | VOC 고유 접수번호 | 항상 |
| 상태 | 뱃지 | 현재 VOC 상태 (접수/분석중/분석실패/처리중/완료/반려) | 항상 |
| 접수일시 | 텍스트 (읽기 전용) | VOC 접수 시간 (YYYY-MM-DD HH:mm:ss) | 항상 |
| 최종 사용자 이메일 | 텍스트 (읽기 전용) | 문의한 고객 이메일 | 항상 |
| 제목 | 텍스트 (읽기 전용) | VOC 제목 | 항상 |
| 내용 | 텍스트 영역 (읽기 전용) | VOC 상세 내용 | 항상 |
| 발생 시간 | 텍스트 (읽기 전용) | 문제 발생 시점 | 입력된 경우만 |
| 계정 ID | 텍스트 (읽기 전용) | 최종 사용자 서비스 계정 ID | 입력된 경우만 |
| 첨부파일 | 다운로드 링크 | 업로드된 파일 목록 | 첨부파일이 있는 경우만 |

### 3.2 AI 분석 결과 섹션

| 항목 | 타입 | 설명 | 표시 조건 |
|------|------|------|----------|
| 자동 분류 카테고리 | 텍스트 (읽기 전용) | AI가 분류한 카테고리 (대분류 > 중분류) | 분석 완료 시 |
| 추천 응대 가이드 | 텍스트 영역 (읽기 전용) | AI가 제시한 응대 가이드 | 분석 완료 시 |
| 분석 상태 | 로딩/에러 메시지 | 분석 진행 중 또는 실패 메시지 | 분석중/분석실패 상태 |

### 3.3 유사 VOC 섹션

| 항목 | 타입 | 설명 | 표시 조건 |
|------|------|------|----------|
| 유사 VOC 목록 | 버튼 리스트 | Ticket ID + 유사도 표시 (최대 5건) | 유사 VOC가 있는 경우만 |
| 유사도 | 텍스트 | 0.00 ~ 1.00 범위 (2자리 소수점) | 유사 VOC가 있는 경우만 |
| 없음 메시지 | 텍스트 | "유사 VOC가 없습니다" | 유사 VOC가 없는 경우 |

**참고**: 유사도 0.7 이상만 표시, 유사도 내림차순 정렬

### 3.4 로그 분석 결과 섹션

| 항목 | 타입 | 설명 | 표시 조건 |
|------|------|------|----------|
| 검색 시간 범위 | 텍스트 (읽기 전용) | 로그 검색에 사용한 시간 범위 | 로그 분석 수행된 경우만 |
| 총 검색 건수 | 텍스트 (읽기 전용) | 검색된 로그 건수 | 로그 분석 수행된 경우만 |
| 주요 발견사항 | 텍스트 영역 (읽기 전용) | AI가 요약한 로그 분석 결과 | 로그 분석 수행된 경우만 |
| 경고 메시지 | 경고 배너 | 검색 결과가 1,000건 초과 시 표시 | 로그가 과다한 경우 |

**참고**:
- 로그 검색 시간 범위: 발생 시간 ± 10분 (발생 시간 미입력 시 VOC 접수 시간 기준)
- 최대 검색 결과: 1,000건 (초과 시 경고 메시지 표시)

### 3.5 DB 조회 결과 섹션

| 항목 | 타입 | 설명 | 표시 조건 |
|------|------|------|----------|
| 조회 테이블 | 텍스트 (읽기 전용) | 조회한 DB 테이블 목록 | DB 조회 수행된 경우만 |
| 주요 발견사항 | 텍스트 영역 (읽기 전용) | AI가 요약한 DB 조회 결과 | DB 조회 수행된 경우만 |

**참고**: AI가 DB 검색이 필요하다고 판단한 경우만 표시

### 3.6 카테고리 수정 섹션

| 항목 | 타입 | 설명 | 유효성 검사 |
|------|------|------|------------|
| 대분류 | 드롭다운 | 카테고리 대분류 선택 | 필수 선택 |
| 중분류 | 드롭다운 | 카테고리 중분류 선택 (대분류에 종속) | 필수 선택 |
| 저장 버튼 | 버튼 | 카테고리 수정 저장 | - |

**참고**:
- 초기값: AI가 분류한 카테고리
- 수정 시 변경 이력에 기록됨
- 수정 데이터는 AI 학습 데이터로 저장 (FR-309, 선택 기능)

### 3.7 담당자 메모 섹션

| 항목 | 타입 | 설명 | 유효성 검사 |
|------|------|------|------------|
| 메모 입력 | 텍스트 영역 | 담당자가 작성하는 메모/코멘트 | 최대 1,000자 |
| 임시저장 버튼 | 버튼 (선택 기능) | 메모를 임시 저장 | - |
| 저장 버튼 | 버튼 | 메모를 최종 저장 | - |

**참고**: FR-708, FR-709 (선택 기능)

### 3.8 변경 이력 섹션

| 항목 | 타입 | 설명 | 표시 조건 |
|------|------|------|----------|
| 변경 일시 | 텍스트 | 변경 발생 시간 (YYYY-MM-DD HH:mm:ss) | 항상 |
| 변경자 | 텍스트 | 변경한 사용자 이메일 또는 'system' | 항상 |
| 변경 내용 | 텍스트 | 상태 변경, 카테고리 수정 등의 내용 | 항상 |

**참고**:
- 시간 역순 정렬 (최신 변경 내역이 상단)
- 상태 변경, 카테고리 수정 이력 모두 표시 (FR-1001, FR-1002, FR-1003)

### 3.9 하단 액션 버튼

| 버튼 | 타입 | 설명 | 표시 조건 |
|------|------|------|----------|
| 반려 | 버튼 (위험) | VOC 반려 처리 | 상태가 '처리중'인 경우 |
| 완료 처리 | 버튼 (주요) | VOC 완료 처리 | 상태가 '처리중'인 경우 |
| 이메일 발송 | 버튼 (보조) | 최종 사용자에게 이메일 발송 | 항상 |

---

## 4. 사용자 액션 및 이벤트

### 4.1 화면 진입 시 (onLoad)

1. URL 파라미터에서 `vocId` 추출
2. VOC 상세 정보 조회 API 호출 (`GET /api/voc/{vocId}`)
3. 데이터 로딩 완료 후 화면 렌더링
4. 변경 이력 조회 API 호출 (`GET /api/voc/{vocId}/history`)

**에러 처리**:
- VOC를 찾을 수 없는 경우: "VOC를 찾을 수 없습니다" 메시지 표시 후 이전 화면으로 이동
- 권한이 없는 경우: "접근 권한이 없습니다" 메시지 표시 후 이전 화면으로 이동

### 4.2 유사 VOC 버튼 클릭

**액션**:
1. 클릭한 유사 VOC의 Ticket ID 확인
2. 유사 VOC 상세 정보 조회 API 호출 (`GET /api/voc/{similarVocId}`)
3. SC-07 유사 VOC 팝업 모달 표시

**에러 처리**:
- VOC를 찾을 수 없는 경우: "VOC를 찾을 수 없습니다" 토스트 메시지 표시

### 4.3 첨부파일 다운로드

**액션**:
1. 다운로드할 파일의 ID 확인
2. 파일 다운로드 API 호출 (`GET /api/voc/{vocId}/attachments/{fileId}`)
3. 브라우저 다운로드 실행

**에러 처리**:
- 파일을 찾을 수 없는 경우: "파일을 찾을 수 없습니다" 토스트 메시지 표시
- 다운로드 실패 시: "파일 다운로드에 실패했습니다" 토스트 메시지 표시

### 4.4 카테고리 수정

**액션**:
1. 대분류 선택 시 해당 대분류의 중분류 목록 로드
2. 중분류까지 선택 후 [저장] 버튼 클릭
3. 카테고리 수정 API 호출 (`PATCH /api/voc/{vocId}/category`)
4. 성공 시 "카테고리가 수정되었습니다" 토스트 메시지 표시
5. 변경 이력 섹션 자동 갱신

**유효성 검사**:
- 대분류 미선택 시: "대분류를 선택해주세요"
- 중분류 미선택 시: "중분류를 선택해주세요"

**에러 처리**:
- API 호출 실패 시: "카테고리 수정에 실패했습니다" 토스트 메시지 표시

### 4.5 담당자 메모 저장

**액션 (임시저장)**:
1. [임시저장] 버튼 클릭
2. 메모 임시저장 API 호출 (`POST /api/voc/{vocId}/memo/draft`)
3. 성공 시 "임시 저장되었습니다" 토스트 메시지 표시

**액션 (최종 저장)**:
1. [저장] 버튼 클릭
2. 메모 저장 API 호출 (`POST /api/voc/{vocId}/memo`)
3. 성공 시 "메모가 저장되었습니다" 토스트 메시지 표시

**유효성 검사**:
- 최대 글자 수: 1,000자
- 초과 시: "메모는 최대 1,000자까지 입력 가능합니다"

**에러 처리**:
- API 호출 실패 시: "메모 저장에 실패했습니다" 토스트 메시지 표시

### 4.6 반려 처리

**액션**:
1. [반려] 버튼 클릭
2. 반려 사유 입력 모달 표시
3. 반려 사유 입력 (필수)
4. 확인 버튼 클릭
5. VOC 반려 API 호출 (`POST /api/voc/{vocId}/reject`)
6. 성공 시 "VOC가 반려 처리되었습니다" 토스트 메시지 표시
7. 변경 이력 섹션 자동 갱신
8. 상태 뱃지 '반려'로 업데이트

**유효성 검사**:
- 반려 사유 필수 입력 (FR-802)
- 최소 10자 이상
- 미입력 시: "반려 사유를 입력해주세요 (최소 10자)"

**에러 처리**:
- API 호출 실패 시: "반려 처리에 실패했습니다" 토스트 메시지 표시
- 상태 전이 규칙 위배 시: "현재 상태에서는 반려할 수 없습니다" 토스트 메시지 표시

### 4.7 완료 처리

**액션**:
1. [완료 처리] 버튼 클릭
2. 확인 모달 표시: "VOC를 완료 처리하시겠습니까?"
3. 확인 버튼 클릭
4. VOC 완료 API 호출 (`POST /api/voc/{vocId}/complete`)
5. 성공 시 "VOC가 완료 처리되었습니다" 토스트 메시지 표시
6. 변경 이력 섹션 자동 갱신
7. 상태 뱃지 '완료'로 업데이트
8. 이메일 발송 안내 모달 표시: "최종 사용자에게 완료 알림을 발송하시겠습니까?"

**에러 처리**:
- API 호출 실패 시: "완료 처리에 실패했습니다" 토스트 메시지 표시
- 상태 전이 규칙 위배 시: "현재 상태에서는 완료할 수 없습니다" 토스트 메시지 표시

### 4.8 이메일 발송

**액션**:
1. [이메일 발송] 버튼 클릭
2. SC-08 이메일 발송 화면으로 이동 (모달 또는 새 화면)
3. 이메일 작성 및 발송

**참고**: FR-902 - 담당자가 선택적으로 이메일 발송 가능

### 4.9 뒤로가기

**액션**:
1. [뒤로가기] 버튼 클릭
2. 이전 화면 (SC-04 칸반보드 또는 SC-05 테이블 리스트)으로 이동

**저장되지 않은 변경사항 확인**:
- 메모 작성 중인 경우: "저장하지 않은 메모가 있습니다. 페이지를 나가시겠습니까?" 확인 모달 표시

---

## 5. 유효성 검사

| 항목 | 검사 규칙 | 에러 메시지 |
|------|----------|------------|
| 카테고리 대분류 | 필수 선택 | "대분류를 선택해주세요" |
| 카테고리 중분류 | 필수 선택 | "중분류를 선택해주세요" |
| 담당자 메모 | 최대 1,000자 | "메모는 최대 1,000자까지 입력 가능합니다" |
| 반려 사유 | 필수 입력, 최소 10자 | "반려 사유를 입력해주세요 (최소 10자)" |

---

## 6. 에러 처리

### 6.1 API 에러

| 에러 코드 | 에러 상황 | 처리 방법 |
|----------|----------|----------|
| 404 | VOC를 찾을 수 없음 | "VOC를 찾을 수 없습니다" 토스트 메시지 표시 후 이전 화면으로 이동 |
| 403 | 접근 권한 없음 | "접근 권한이 없습니다" 토스트 메시지 표시 후 이전 화면으로 이동 |
| 400 | 잘못된 요청 (상태 전이 규칙 위배 등) | 서버 에러 메시지 표시 |
| 500 | 서버 내부 오류 | "서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요" 토스트 메시지 표시 |

### 6.2 네트워크 에러

| 에러 상황 | 처리 방법 |
|----------|----------|
| 네트워크 연결 실패 | "네트워크 연결을 확인해주세요" 토스트 메시지 표시 |
| 요청 타임아웃 | "요청 시간이 초과되었습니다. 다시 시도해주세요" 토스트 메시지 표시 |

### 6.3 분석 상태별 에러 표시

| 상태 | 표시 내용 |
|------|----------|
| 분석중 | 로딩 인디케이터 + "AI 분석이 진행 중입니다..." |
| 분석실패 | 경고 배너 + "AI 분석에 실패했습니다. 관리자에게 문의하세요" |

**참고**: FR-308 - AI/시스템 장애 시 '분석실패' 상태로 변경되며 담당자에게 이메일 알림 발송

---

## 7. 연관 API

### 7.1 VOC 상세 조회

**Endpoint**: `GET /api/voc/{vocId}`

**Response**:
```json
{
  "vocId": "VOC-20260123-00001",
  "status": "PROCESSING",
  "createdAt": "2026-01-23T14:30:25Z",
  "endUserEmail": "user@example.com",
  "title": "결제 오류 발생",
  "content": "결제 진행 중 오류가 발생했습니다...",
  "occurredAt": "2026-01-23T14:25:00Z",
  "accountId": "user123",
  "attachments": [
    {
      "fileId": "file-001",
      "fileName": "screenshot.png",
      "fileSize": 1024000,
      "downloadUrl": "/api/voc/VOC-20260123-00001/attachments/file-001"
    }
  ],
  "analysis": {
    "category": {
      "main": "오류/버그",
      "sub": "시스템 오류"
    },
    "responseGuide": "외부 연동 시스템 타임아웃 문제로...",
    "similarVocs": [
      {
        "vocId": "VOC-20260120-00045",
        "similarity": 0.92
      }
    ],
    "logAnalysis": {
      "timeRange": {
        "from": "2026-01-23T14:15:00Z",
        "to": "2026-01-23T14:35:00Z"
      },
      "totalCount": 128,
      "summary": "외부 연동 시스템 타임아웃 에러..."
    },
    "dbQueryResult": {
      "tables": ["payments", "transactions"],
      "summary": "거래 ID 1234567890의 상태가 PENDING..."
    }
  },
  "memo": "담당자 메모 내용..."
}
```

### 7.2 유사 VOC 상세 조회

**Endpoint**: `GET /api/voc/{vocId}`

**참고**: 동일한 VOC 상세 조회 API 사용

### 7.3 변경 이력 조회

**Endpoint**: `GET /api/voc/{vocId}/history`

**Response**:
```json
{
  "history": [
    {
      "timestamp": "2026-01-23T15:00:00Z",
      "actor": "admin@example.com",
      "action": "STATUS_CHANGE",
      "details": {
        "from": "ANALYZING",
        "to": "PROCESSING"
      }
    },
    {
      "timestamp": "2026-01-23T14:32:05Z",
      "actor": "system",
      "action": "STATUS_CHANGE",
      "details": {
        "from": "RECEIVED",
        "to": "ANALYZING"
      }
    },
    {
      "timestamp": "2026-01-23T14:30:25Z",
      "actor": "user@example.com",
      "action": "VOC_CREATED",
      "details": {}
    }
  ]
}
```

### 7.4 카테고리 수정

**Endpoint**: `PATCH /api/voc/{vocId}/category`

**Request**:
```json
{
  "mainCategory": "오류/버그",
  "subCategory": "데이터 오류"
}
```

**Response**:
```json
{
  "success": true,
  "message": "카테고리가 수정되었습니다"
}
```

### 7.5 담당자 메모 저장

**Endpoint (임시저장)**: `POST /api/voc/{vocId}/memo/draft`

**Endpoint (최종 저장)**: `POST /api/voc/{vocId}/memo`

**Request**:
```json
{
  "memo": "담당자 메모 내용..."
}
```

**Response**:
```json
{
  "success": true,
  "message": "메모가 저장되었습니다"
}
```

### 7.6 VOC 반려

**Endpoint**: `POST /api/voc/{vocId}/reject`

**Request**:
```json
{
  "reason": "반려 사유 (최소 10자)"
}
```

**Response**:
```json
{
  "success": true,
  "message": "VOC가 반려 처리되었습니다",
  "status": "REJECTED"
}
```

### 7.7 VOC 완료

**Endpoint**: `POST /api/voc/{vocId}/complete`

**Response**:
```json
{
  "success": true,
  "message": "VOC가 완료 처리되었습니다",
  "status": "COMPLETED"
}
```

### 7.8 첨부파일 다운로드

**Endpoint**: `GET /api/voc/{vocId}/attachments/{fileId}`

**Response**: 파일 바이너리 데이터

---

## 8. 화면 전환

### 8.1 진입 화면

| 화면 ID | 화면명 | 전환 조건 |
|--------|--------|----------|
| SC-04 | VOC 리스트 (칸반) | 칸반보드에서 VOC 클릭 |
| SC-05 | VOC 리스트 (테이블) | 테이블 리스트에서 VOC 클릭 |

### 8.2 이동 가능 화면

| 화면 ID | 화면명 | 전환 조건 | 전환 방식 |
|--------|--------|----------|----------|
| SC-07 | 유사 VOC 팝업 | 유사 VOC 버튼 클릭 | 모달 팝업 |
| SC-08 | 이메일 발송 화면 | [이메일 발송] 버튼 클릭 | 모달 또는 새 화면 |
| SC-04/SC-05 | VOC 리스트 | [뒤로가기] 버튼 클릭 | 페이지 이동 |

---

## 9. 관련 요구사항

### 9.1 기능 요구사항

| 요구사항 ID | 설명 | 비고 |
|-----------|------|------|
| FR-701 | VOC 기본 정보 표시 | 필수 |
| FR-702 | AI 분석 결과 표시 | 필수 |
| FR-703 | 유사 VOC 버튼 표시 | 필수 |
| FR-704 | 유사 VOC 팝업 표시 | 필수 |
| FR-705 | 로그 분석 결과 표시 | 필수 |
| FR-706 | DB 조회 결과 표시 | 필수 |
| FR-707 | 카테고리 수동 수정 | 필수 |
| FR-708 | 담당자 메모 입력 | 선택 |
| FR-709 | 처리 내용 임시 저장 | 선택 |
| FR-801 | VOC 반려 | 필수 |
| FR-802 | 반려 사유 필수 입력 | 필수 |
| FR-1001 | 상태 변경 이력 저장 | 필수 |
| FR-1002 | 카테고리 수정 이력 저장 | 필수 |
| FR-1003 | 변경 이력 조회 | 필수 |

### 9.2 비기능 요구사항

| 요구사항 ID | 설명 | 비고 |
|-----------|------|------|
| NFR-03 | 개인정보(이메일) 암호화 저장 | 보안 |
| NFR-07 | 모든 상태 변경 및 주요 작업 이력 저장 | 감사 추적 |

---

## 10. 접근성 (Accessibility)

### 10.1 키보드 접근성

- 모든 액션 버튼은 키보드로 접근 가능 (Tab 키)
- Enter 키로 버튼 실행
- Esc 키로 모달 닫기

### 10.2 스크린 리더

- 각 섹션에 적절한 heading 레벨 지정 (h2, h3)
- 버튼에 명확한 aria-label 제공
- 상태 뱃지에 aria-label로 상태 설명 제공

### 10.3 시각적 접근성

- 상태 뱃지는 색상 + 텍스트로 구분
- 에러 메시지는 색상 + 아이콘으로 구분
- 충분한 색상 대비율 (WCAG 2.1 AA 준수)

---

## 11. 성능 고려사항

### 11.1 초기 로딩 최적화

- VOC 상세 정보와 변경 이력을 병렬로 조회
- 첨부파일은 다운로드 시에만 로드 (Lazy Loading)

### 11.2 실시간 업데이트

- 분석중 상태일 때 폴링(5초 간격)으로 상태 확인
- 분석 완료 시 자동으로 화면 갱신

### 11.3 대용량 데이터 처리

- 로그 분석 결과가 긴 경우 "더보기" 기능 제공
- 변경 이력이 많은 경우 페이지네이션 적용 (10건씩)

---

## 12. 이슈 연결

**관련 이슈**: #6

---

## 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-23 | Claude Code | 초안 작성 |
